(this["webpackJsonpsd-0x-project-trybewallet"]=this["webpackJsonpsd-0x-project-trybewallet"]||[]).push([[0],{33:function(e,t,n){e.exports=n(46)},42:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(21),l=n.n(c),i=n(13),s=n(19),o=(n(42),n(2)),u=n(3),d=n(18),p=n(4),h=n(5),m=n(14),b=n(7),f=n(6),v=n(16),E=n.n(v),y=function(e){Object(b.a)(n,e);var t=Object(f.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){var e=this.props,t=e.nameLabel,n=e.onClick,a=e.disabled,c=e.onKeyPress;return r.a.createElement("button",{type:"button",onClick:n,disabled:a,onKeyPress:c},t)}}]),n}(a.Component);y.defaultProps={disabled:!1,onKeyPress:E.a.func};var O=function(e){Object(b.a)(n,e);var t=Object(f.a)(n);function n(){var e;return Object(p.a)(this,n),(e=t.call(this)).state={email:"",password:"",logged:!1},e.handleChange=e.handleChange.bind(Object(m.a)(e)),e.handleClick=e.handleClick.bind(Object(m.a)(e)),e}return Object(h.a)(n,[{key:"handleChange",value:function(e){var t=e.target,n=t.name,a=t.value;this.setState(Object(d.a)({},n,a))}},{key:"handleClick",value:function(){(0,this.props.setDataLoginStore)({email:this.state.email}),this.setState((function(e){return Object(u.a)(Object(u.a)({},e),{},{logged:!0})}))}},{key:"checkEmail",value:function(){var e=this.state.email;return/\S+@\S+\.\S+/.test(e)}},{key:"checkPassword",value:function(){return this.state.password.length>=6}},{key:"checkDataLogin",value:function(){return this.checkEmail()&&this.checkPassword()}},{key:"render",value:function(){var e=this.state,t=e.email,n=e.password;return e.logged?r.a.createElement(o.a,{to:"/carteira"}):r.a.createElement("form",null,r.a.createElement("label",{htmlFor:"email-input"},r.a.createElement("input",{id:"email-input","data-testid":"email-input",type:"email",placeholder:"email@email.com",name:"email",value:t,onChange:this.handleChange})),r.a.createElement("label",{htmlFor:"password-input"},r.a.createElement("input",{id:"password-input","data-testid":"password-input",type:"password",placeholder:"Senha",name:"password",value:n,onChange:this.handleChange})),r.a.createElement(y,{type:"submit",nameLabel:"Entrar",onClick:this.handleClick,disabled:!this.checkDataLogin()}))}}]),n}(a.Component),j=Object(i.b)(null,(function(e){return{setDataLoginStore:function(t){return e(function(e){return{type:"ADD_DATA_LOGIN",payload:e}}(t))}}}))(O),g=n(9),k=n.n(g),C=n(15),x=function(e){Object(b.a)(n,e);var t=Object(f.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){var e=this.props,t=e.email,n=e.expenses.reduce((function(e,t){var n=t.currency;return e+t.value*t.exchangeRates[n].ask}),0).toFixed(2);return r.a.createElement("header",null,r.a.createElement(s.b,{to:"/"},"Home"),r.a.createElement("div",null,r.a.createElement("span",{"data-testid":"email-field"},"Email:",t)),r.a.createElement("div",null,r.a.createElement("span",null,"Despesa Total:"),r.a.createElement("span",{"data-testid":"total-field"},"R$ ".concat(n)),r.a.createElement("span",{"data-testid":"header-currency-field"},"BRL")))}}]),n}(a.Component),w=Object(i.b)((function(e){return{email:e.user.email,expenses:e.wallet.expenses}}))(x),S="https://economia.awesomeapi.com.br/json/all",D=function(){var e=Object(C.a)(k.a.mark((function e(){var t,n,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(S);case 3:return t=e.sent,e.next=6,t.json();case 6:return n=e.sent,a=Object.keys(n),e.abrupt("return",a);case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(C.a)(k.a.mark((function e(){var t,n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(S);case 3:return t=e.sent,e.next=6,t.json();case 6:return n=e.sent,e.abrupt("return",n);case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),L=function(e){Object(b.a)(n,e);var t=Object(f.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){var e=this.props,t=e.nameLabel,n=e.name,a=e.onChange,c=e.value,l=e.id,i=e.defaultOption,s=e.arrOptions;return r.a.createElement("label",{htmlFor:l},t,r.a.createElement("select",{name:n,id:l,onChange:a,value:c},i&&r.a.createElement("option",null,i),s.map((function(e,t){return r.a.createElement("option",{key:t},e)}))))}}]),n}(a.Component),A=function(e){Object(b.a)(n,e);var t=Object(f.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){var e=this.props,t=e.label,n=e.onChange,a=e.onKeyPress,c=e.value,l=e.id,i=e.type,s=void 0===i?"text":i;return r.a.createElement("label",{htmlFor:l},t,r.a.createElement("input",{type:s,id:l,onChange:n,value:c,onKeyPress:a}))}}]),n}(a.Component);A.defaultProps={type:"text",onKeyPress:null};var T=["Descri\xe7\xe3o","Tag","M\xe9todo de pagamento","Valor","Moeda","C\xe2mbio utilizado","Valor convertido","Moeda de convers\xe3o","Editar/Excluir"],F=function(e){Object(b.a)(n,e);var t=Object(f.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"btnDel",value:function(e){(0,this.props.deleteExpense)(e)}},{key:"btnEdit",value:function(){console.log("Editei")}},{key:"renderTableExpenses",value:function(){var e=this;return this.props.expenses.map((function(t){var n=t.currency,a=t.exchangeRates[n],c=a.name,l=a.ask,i=+t.value,s=+l;return r.a.createElement("tr",{key:t.id},r.a.createElement("td",null,t.description),r.a.createElement("td",null,t.tag),r.a.createElement("td",null,t.method),r.a.createElement("td",null,i),r.a.createElement("td",null,c.split("/")[0]),r.a.createElement("td",null,s.toFixed(2)),r.a.createElement("td",null,(t.value*s).toFixed(2)),r.a.createElement("td",null,"Real"),r.a.createElement("td",null,r.a.createElement("button",{type:"button",onClick:e.btnEdit},"Edit"),r.a.createElement("button",{type:"button",onClick:function(){return e.btnDel(t.id)},"data-testid":"delete-btn"},"Del")))}))}},{key:"render",value:function(){return r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,T.map((function(e){return r.a.createElement("th",{key:e},e)})))),r.a.createElement("tbody",null,this.renderTableExpenses()))}}]),n}(a.Component),_=Object(i.b)((function(e){return{expenses:e.wallet.expenses}}),(function(e){return{deleteExpense:function(t){return e({type:"DELETE_EXPENSES",payload:{id:t}})}}}))(F);F.defaultProps={map:null,deleteExpense:null};var K=["Dinheiro","Cart\xe3o de cr\xe9dito","Cart\xe3o de d\xe9bito"],R=["Alimenta\xe7\xe3o","Lazer","Trabalho","Transporte","Sa\xfade"],I=function(e){Object(b.a)(n,e);var t=Object(f.a)(n);function n(){var e;return Object(p.a)(this,n),(e=t.call(this)).state={id:0,value:"",description:"",currency:"USD",method:"Dinheiro",tag:"Alimenta\xe7\xe3o"},e.handleChange=e.handleChange.bind(Object(m.a)(e)),e.handleClick=e.handleClick.bind(Object(m.a)(e)),e.capitalFirstLetter=e.capitalFirstLetter.bind(Object(m.a)(e)),e.handleKeyPress=e.handleKeyPress.bind(Object(m.a)(e)),e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){(0,this.props.setCurrencies)()}},{key:"capitalFirstLetter",value:function(e){var t=e.target,n=t.id,a=t.value,r=a.toLowerCase().charAt(0).toUpperCase()+a.toLowerCase().slice(1);this.setState((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(d.a)({},n,r))}))}},{key:"handleKeyPress",value:function(e){var t=e.key,n=this.state,a=n.value,r=n.description;if("Enter"===t&&a&&r)return this.handleClick()}},{key:"handleChange",value:function(e){var t=e.target,n=t.id,a=t.value;this.setState((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(d.a)({},n,a))}))}},{key:"handleClick",value:function(){var e=Object(C.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,this.props.setExpenses)(this.state),this.setState((function(e){return Object(u.a)(Object(u.a)({},e),{},{id:e.id+1,value:"",description:""})}));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"renderInputs",value:function(){var e=this.state,t=e.value,n=e.description;return r.a.createElement(r.a.Fragment,null,r.a.createElement(A,{label:"Valor",type:"number",id:"value",value:t,onChange:this.handleChange}),r.a.createElement(A,{label:"Descri\xe7\xe3o",id:"description",value:n,onChange:this.capitalFirstLetter,onKeyPress:this.handleKeyPress}))}},{key:"renderSelects",value:function(){var e=this.state,t=e.currency,n=e.tag,a=e.method,c=this.props.currencies;return r.a.createElement(r.a.Fragment,null,r.a.createElement(L,{nameLabel:"Moedas",id:"currency",name:"currency",value:t,onChange:this.handleChange,arrOptions:c,defaultOption:""}),r.a.createElement(L,{nameLabel:"M\xe9todo de pagamento",id:"method",name:"method",value:a,onChange:this.handleChange,arrOptions:K,defaultOption:""}),r.a.createElement(L,{nameLabel:"Tag",id:"tag",name:"tag",value:n,onChange:this.handleChange,arrOptions:R,defaultOption:""}))}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(w,null),r.a.createElement("main",null,r.a.createElement("form",null,this.renderInputs(),this.renderSelects(),r.a.createElement(y,{nameLabel:"Adicionar despesa",onClick:this.handleClick,onKeyPress:this.handleKeyPress})),r.a.createElement(_,null)))}}]),n}(r.a.Component),M=Object(i.b)((function(e){return{currencies:e.wallet.currencies,expenses:e.wallet.expenses}}),(function(e){return{setCurrencies:function(){return e(function(){var e=Object(C.a)(k.a.mark((function e(t){var n,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D();case 2:n=e.sent,a=n.filter((function(e){return"USDT"!==e&&e})),t({type:"REQUEST_API_SUCESS",payload:{currencies:a}});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},setExpenses:function(t){return e(function(e){return function(){var t=Object(C.a)(k.a.mark((function t(n){var a,r;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P();case 2:a=t.sent,r=Object(u.a)(Object(u.a)({},e),{},{exchangeRates:a}),n({type:"ADD_DATA_EXPENSES",payload:{expenses:r}});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))}}}))(I);n(45);var N=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(o.d,null,r.a.createElement(o.b,{path:"/carteira",component:M}),r.a.createElement(o.b,{exat:!0,path:"/",component:j})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var U=n(17),X=n(30),B=n(31),V={email:""},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_DATA_LOGIN":return Object(u.a)(Object(u.a)({},e),{},{email:t.payload.email});default:return e}},z=n(32),G={currencies:[],expenses:[]},J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REQUEST_API_SUCESS":return Object(u.a)(Object(u.a)({},e),{},{currencies:t.payload.currencies});case"ADD_DATA_EXPENSES":return Object(u.a)(Object(u.a)({},e),{},{expenses:[].concat(Object(z.a)(e.expenses),[t.payload.expenses])});case"DELETE_EXPENSES":var n=e.expenses.filter((function(e){return e.id!==t.payload.id}));return Object(u.a)(Object(u.a)({},e),{},{expenses:n});default:return e}},Q=Object(U.combineReducers)({user:W,wallet:J}),$=Object(U.createStore)(Q,Object(X.composeWithDevTools)(Object(U.applyMiddleware)(B.a)));l.a.render(r.a.createElement(s.a,null,r.a.createElement(i.a,{store:$},r.a.createElement(N,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[33,1,2]]]);
//# sourceMappingURL=main.7d3d3e0e.chunk.js.map